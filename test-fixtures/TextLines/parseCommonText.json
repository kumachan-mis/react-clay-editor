{
  "common": {
    "taggedLinks": [{ "tagName": "@" }]
  },
  "testCases": [
    {
      "name": "quotation",
      "inputLines": [
        "> Genius is one percent inspiration and ninety-nine percent perspiration",
        " > Anyone who has never made a mistake has never tried anything new"
      ],
      "expectedNodes": [
        {
          "type": "quotation",
          "lineIndex": 0,
          "indentDepth": 0,
          "children": [
            {
              "type": "normal",
              "lineIndex": 0,
              "range": [2, 71],
              "text": "Genius is one percent inspiration and ninety-nine percent perspiration"
            }
          ]
        },
        {
          "type": "quotation",
          "indentDepth": 1,
          "children": [
            {
              "type": "normal",
              "text": "Anyone who has never made a mistake has never tried anything new"
            }
          ]
        }
      ]
    },
    {
      "name": "code",
      "inputLines": [
        "`import { Editor } from 'react-realtime-markup-editor`",
        "```",
        "const SampleEditor: React.FC = () => {",
        "  return <Editor />;",
        "};",
        "```",
        "```",
        "function square(x: number): number {",
        "  return x*x;",
        "}",
        "  ```",
        "  function cube(x: number): number {",
        "    return x*x*x;",
        "  }",
        "// This is actually a normal text"
      ],
      "expectedNodes": [
        {
          "type": "normalLine",
          "lineIndex": 0,
          "children": [
            {
              "type": "inlineCode",
              "lineIndex": 0,
              "range": [0, 53],
              "code": "import { Editor } from 'react-realtime-markup-editor"
            }
          ]
        },
        {
          "type": "blockCode",
          "range": [1, 5],
          "facingMeta": {
            "type": "blockCodeMeta",
            "lineIndex": 1,
            "indentDepth": 0
          },
          "children": [
            {
              "type": "blockCodeLine",
              "lineIndex": 2,
              "indentDepth": 0,
              "codeLine": "const SampleEditor: React.FC = () => {"
            },
            {
              "type": "blockCodeLine",
              "lineIndex": 3,
              "indentDepth": 0,
              "codeLine": "  return <Editor />;"
            },
            {
              "type": "blockCodeLine",
              "lineIndex": 4,
              "indentDepth": 0,
              "codeLine": "};"
            }
          ],
          "trailingMeta": {
            "type": "blockCodeMeta",
            "lineIndex": 5,
            "indentDepth": 0
          }
        },
        {
          "type": "blockCode",
          "range": [6, 9],
          "facingMeta": {
            "type": "blockCodeMeta",
            "lineIndex": 6,
            "indentDepth": 0
          },
          "children": [
            {
              "type": "blockCodeLine",
              "lineIndex": 7,
              "indentDepth": 0,
              "codeLine": "function square(x: number): number {"
            },
            {
              "type": "blockCodeLine",
              "lineIndex": 8,
              "indentDepth": 0,
              "codeLine": "  return x*x;"
            },
            {
              "type": "blockCodeLine",
              "lineIndex": 9,
              "indentDepth": 0,
              "codeLine": "}"
            }
          ]
        },
        {
          "type": "blockCode",
          "facingMeta": {
            "type": "blockCodeMeta",
            "indentDepth": 2
          },
          "children": [
            {
              "type": "blockCodeLine",
              "indentDepth": 2,
              "codeLine": "function cube(x: number): number {"
            },
            {
              "type": "blockCodeLine",
              "indentDepth": 2,
              "codeLine": "  return x*x*x;"
            },
            {
              "type": "blockCodeLine",
              "indentDepth": 2,
              "codeLine": "}"
            }
          ]
        },
        {
          "type": "normalLine",
          "children": [
            {
              "type": "normal",
              "text": "// This is actually a normal text"
            }
          ]
        }
      ]
    },
    {
      "name": "formula",
      "inputLines": [
        "$f(x)$",
        "$$\\int_a^b f(x) dx$$",
        "$$",
        "\\int_a^b f(x) dx",
        "$$",
        "$$",
        "\\sum_{n=1}^N a_n",
        "  $$",
        "  \\sum_{m=1}^M b_m",
        "c_n"
      ],
      "expectedNodes": [
        {
          "type": "normalLine",
          "lineIndex": 0,
          "children": [
            {
              "type": "inlineFormula",
              "lineIndex": 0,
              "range": [0, 5],
              "formula": "f(x)"
            }
          ]
        },
        {
          "type": "normalLine",
          "lineIndex": 1,
          "children": [
            {
              "type": "displayFormula",
              "lineIndex": 1,
              "range": [0, 19],
              "formula": "\\int_a^b f(x) dx"
            }
          ]
        },
        {
          "type": "blockFormula",
          "range": [2, 4],
          "facingMeta": {
            "type": "blockFormulaMeta",
            "lineIndex": 2,
            "indentDepth": 0
          },
          "children": [
            {
              "type": "blockFormulaLine",
              "lineIndex": 3,
              "indentDepth": 0,
              "formulaLine": "\\int_a^b f(x) dx"
            }
          ],
          "trailingMeta": {
            "type": "blockFormulaMeta",
            "lineIndex": 4,
            "indentDepth": 0
          }
        },
        {
          "type": "blockFormula",
          "range": [5, 6],
          "facingMeta": {
            "type": "blockFormulaMeta",
            "lineIndex": 5,
            "indentDepth": 0
          },
          "children": [
            {
              "type": "blockFormulaLine",
              "lineIndex": 6,
              "indentDepth": 0,
              "formulaLine": "\\sum_{n=1}^N a_n"
            }
          ]
        },
        {
          "type": "blockFormula",
          "facingMeta": {
            "type": "blockFormulaMeta",
            "indentDepth": 2
          },
          "children": [
            {
              "type": "blockFormulaLine",
              "indentDepth": 2,
              "formulaLine": "\\sum_{m=1}^M b_m"
            }
          ]
        },
        {
          "type": "normalLine",
          "children": [
            {
              "type": "normal",
              "text": "c_n"
            }
          ]
        }
      ]
    },
    {
      "name": "tagged link",
      "inputLines": ["[@: tagged link test]"],
      "expectedNodes": [
        {
          "type": "normalLine",
          "lineIndex": 0,
          "children": [
            {
              "type": "taggedLink",
              "lineIndex": 0,
              "range": [0, 20],
              "tag": "@: ",
              "linkName": "tagged link test"
            }
          ]
        }
      ]
    },
    {
      "name": "bracket link",
      "inputLines": ["[bracket test]"],
      "expectedNodes": [
        {
          "type": "normalLine",
          "lineIndex": 0,
          "children": [
            {
              "type": "bracketLink",
              "lineIndex": 0,
              "range": [0, 13],
              "linkName": "bracket test"
            }
          ]
        }
      ]
    },
    {
      "name": "hashtag link",
      "inputLines": ["#hashtagtest, #hashtag_test, #hashtag-test."],
      "expectedNodes": [
        {
          "type": "normalLine",
          "lineIndex": 0,
          "children": [
            {
              "type": "hashTag",
              "lineIndex": 0,
              "range": [0, 11],
              "hashTag": "#hashtagtest"
            },
            {
              "type": "normal",
              "text": ", "
            },
            {
              "type": "hashTag",
              "lineIndex": 0,
              "range": [14, 26],
              "hashTag": "#hashtag_test"
            },
            {
              "type": "normal",
              "text": ", "
            },
            {
              "type": "hashTag",
              "lineIndex": 0,
              "range": [29, 41],
              "hashTag": "#hashtag-test"
            },
            {
              "type": "normal",
              "text": "."
            }
          ]
        }
      ]
    },
    {
      "name": "normal text",
      "inputLines": ["hello world"],
      "expectedNodes": [
        {
          "type": "normalLine",
          "lineIndex": 0,
          "children": [
            {
              "type": "normal",
              "lineIndex": 0,
              "range": [0, 10],
              "text": "hello world"
            }
          ]
        }
      ]
    },
    {
      "name": "empty text",
      "inputLines": [""],
      "expectedNodes": [
        {
          "type": "normalLine",
          "children": []
        }
      ]
    }
  ]
}
